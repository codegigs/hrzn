drop table PRODUCT;
drop table REQUESTS;
drop table REQUESTS_DETAILS;
drop table DOCUMENTS;
drop table PAYMENTS;
drop table SERVICES;
drop table COMPANY;
drop table USERS;


CREATE TABLE USERS (
USER_ID INTEGER NOT NULL AUTO_INCREMENT,
USER_NAME VARCHAR(200),
FIRST_NAME VARCHAR(200),
LAST_NAME VARCHAR(200),
EMAIL VARCHAR(200),
ENABLED TINYINT NOT NULL DEFAULT 1,
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (USER_ID),
UNIQUE KEY UNI_USERNAME_EMAIL  (EMAIL,USER_NAME));

CREATE TABLE COMPANY (
COMPANY_ID INTEGER NOT NULL AUTO_INCREMENT,
NAME VARCHAR(50),
ADDRESS VARCHAR(400),
CITY VARCHAR(50),
ENABLED TINYINT NOT NULL DEFAULT 1,
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (COMPANY_ID),
CONSTRAINT FK_COMPANY_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID));


CREATE TABLE PRODUCT (
PRODUCT_ID INTEGER NOT NULL AUTO_INCREMENT,
PRODUCT_NAME VARCHAR(400),
PRODUCT_TYPE VARCHAR(50),
ENABLED TINYINT NOT NULL DEFAULT 1,
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (PRODUCT_ID),
CONSTRAINT FK_PRODUCT_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID));

CREATE TABLE SERVICES (
SERVICE_ID INTEGER NOT NULL AUTO_INCREMENT,
SERVICE_NAME VARCHAR(400),
SERVICE_TYPE VARCHAR(50),
ENABLED TINYINT NOT NULL DEFAULT 1,
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (SERVICE_ID),
CONSTRAINT FK_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID));

CREATE TABLE PAYMENTS (
PAYMENT_ID INTEGER NOT NULL AUTO_INCREMENT,
PAYMENT_TYPE VARCHAR(400),
NO_OF_INSTALMENTS INTEGER,
PAYMENT_BY INTEGER,
PAYMENT_AMOUNT INTEGER,
CURRENCY_TYPE VARCHAR(10),
ENABLED TINYINT NOT NULL DEFAULT 1,
STATUS VARCHAR(20),
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (PAYMENT_ID),
CONSTRAINT FK_PAYMENTS_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID),
CONSTRAINT FK_PAYMENTS_COMPANY_ID FOREIGN KEY (PAYMENT_BY) REFERENCES COMPANY (COMPANY_ID));


CREATE TABLE DOCUMENTS(
DOCUMENT_ID INTEGER NOT NULL AUTO_INCREMENT,
DOCUMENT_NAME VARCHAR(400),
EXTENSION_TYPE VARCHAR(50),
DATA BLOB,
ENABLED TINYINT NOT NULL DEFAULT 1,
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (DOCUMENT_ID),
CONSTRAINT FK_DOCUMENTS_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID)
);
 
 CREATE TABLE REQUESTS_DETAILS (
 REQUEST_DETAIL_ID INTEGER NOT NULL AUTO_INCREMENT,
 DESCRIPTIONS VARCHAR(200),
 SUBMITED_DATE TIMESTAMP,
 REJECTED_DATE TIMESTAMP,
 RESUBMITTED_DATE TIMESTAMP,
 RESUBMTTED_COUNT INTEGER,
 CONTACT_PERSON_NAME VARCHAR(200),
 CONTACT_PERSON_NUMBER VARCHAR(200),
 ENABLED TINYINT NOT NULL DEFAULT 1,
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
FDA_APPROVAL_DATE TIMESTAMP,
PRIMARY KEY (REQUEST_DETAIL_ID),
CONSTRAINT FK_REQUESTS_DETAILS_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID));


CREATE TABLE REQUESTS (
REQUEST_ID INTEGER NOT NULL AUTO_INCREMENT,
SERVICE_ID INTEGER,
COMPANY_ID INTEGER,
PRODUCT_ID INTEGER,
REQUEST_DETAIL_ID INTEGER,
PAYMENT_ID INTEGER, 
DOCUMENT_ID INTEGER,
CREATED_BY INTEGER, 
CREATED_ON TIMESTAMP,
LAST_UPDATED_ON TIMESTAMP,
PRIMARY KEY (REQUEST_ID),
CONSTRAINT FK_REQUESTS_USER_ID FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID),
CONSTRAINT FK_REQUESTS_COMPANY_ID FOREIGN KEY (COMPANY_ID) REFERENCES COMPANY (COMPANY_ID),
CONSTRAINT FK_REQUESTS_SERVICE_ID FOREIGN KEY (SERVICE_ID) REFERENCES SERVICES (SERVICE_ID),
CONSTRAINT FK_REQUESTS_DOCUMENT_ID FOREIGN KEY (DOCUMENT_ID) REFERENCES DOCUMENTS (DOCUMENT_ID),
CONSTRAINT FK_REQUESTS_PAYMENT_ID FOREIGN KEY (PAYMENT_ID) REFERENCES PAYMENTS (PAYMENT_ID),
CONSTRAINT FK_REQ_REQ_DET_ID  FOREIGN KEY (REQUEST_DETAIL_ID) REFERENCES REQUESTS_DETAILS (REQUEST_DETAIL_ID)
);
